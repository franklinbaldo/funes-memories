@import "tailwindcss";

@theme {
  --color-void: #0a0e14;
  --color-surface: #11151c;
  --color-ink: #d4d4d4;
  --color-ink-dim: #8F93A2;
  --color-candle: #ffaa33;
  --color-signal: #33ff88;
  --color-link: #80d4ff;
  --color-line: #1F2937;

  --font-serif: "Iowan Old Style", "EB Garamond", serif;
  --font-mono: "Berkeley Mono", "JetBrains Mono", monospace;

  --spacing-huge: 8rem;
}

@layer base {
  html {
    background-color: var(--color-void);
    color: var(--color-ink);
    font-family: var(--font-serif);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-size: 16px;
    line-height: 1.5;
  }

  body {
    @apply min-h-screen relative overflow-x-hidden;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-serif font-medium text-ink;
  }

  h1 { @apply text-4xl md:text-6xl leading-[1.1] tracking-tight mb-6; }
  h2 { @apply text-3xl md:text-4xl leading-snug tracking-tight mb-4 mt-12; }
  h3 { @apply font-mono text-sm md:text-base tracking-[0.2em] uppercase text-signal mb-4 mt-8; }

  p { @apply mb-6 text-lg leading-relaxed max-w-[65ch]; }

  a {
    @apply text-link no-underline transition-colors duration-200 hover:text-candle;
  }

  code {
    @apply font-mono bg-surface px-1.5 py-0.5 rounded text-[0.85em] text-candle;
  }

  pre {
    @apply bg-surface p-6 rounded-sm overflow-x-auto border border-line my-8 text-sm leading-relaxed;
  }

  pre code {
    @apply bg-transparent p-0 text-inherit rounded-none text-ink;
  }

  blockquote {
    @apply border-l-2 border-candle pl-6 my-8 italic font-serif text-ink-dim text-xl leading-relaxed;
  }

  ul, ol {
    @apply list-inside pl-4 mb-6 space-y-2;
  }

  li {
    @apply marker:text-signal;
  }
}

@layer components {
  .texture-grain {
    @apply fixed inset-0 pointer-events-none z-50 opacity-[0.03];
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }

  .timeline-line {
    @apply absolute left-0 top-0 bottom-0 w-px bg-line;
  }

  .timeline-marker {
    @apply absolute -left-[3.5px] top-2.5 w-2 h-2 rounded-full bg-line transition-all duration-300;
  }

  .timeline-card:hover .timeline-marker {
    @apply bg-signal scale-125 shadow-[0_0_8px_var(--color-signal)];
  }

  .marginalia {
    @apply font-mono text-xs leading-relaxed text-ink-dim transition-colors duration-200;
  }

  .marginalia:hover, .marginalia.active {
    @apply text-candle;
  }
}

/* Typography refinements for Markdown content */
.prose {
  @apply text-ink font-serif max-w-[65ch];
}

.prose h2 {
  @apply font-serif text-3xl mt-16 mb-6 text-ink border-b border-line pb-2;
}

.prose h3 {
  @apply font-mono text-sm tracking-[0.2em] uppercase text-signal mt-12 mb-4;
}

.prose p {
  @apply mb-6 text-lg md:text-[1.125rem] leading-[1.7] text-ink/90;
}

.prose ul, .prose ol {
  @apply mb-8 pl-0 list-none space-y-3 text-lg text-ink/90;
}

.prose li {
  @apply relative pl-6 before:content-['â€º'] before:absolute before:left-0 before:text-signal before:font-mono;
}

.prose a {
  @apply border-b border-link/30 hover:border-candle text-link hover:text-candle no-underline transition-all;
}

.prose blockquote {
  @apply border-l-2 border-candle pl-6 my-10 italic text-xl text-ink-dim bg-surface/30 py-4 pr-4 rounded-r-sm;
}

/* Syntax Highlighting overrides */
.astro-code {
  @apply !bg-surface !text-sm !leading-relaxed border border-line rounded-sm shadow-lg;
}
